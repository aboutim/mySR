---
title: 研究IDC基础设施-服务器组件选型
date: 2016-07-27 17:44:09
categories: 云计算
tags:
 - 云计算
 - 服务器
---

服务器是 IDC 基础设施的重要组成元素之一，还有交换机、路由器等网络设备。选型服务器一般只要对标 CPU、内存、规格外形、硬盘的需求即可，这种套路对于小规模部署还是比较简单适用的。但在大规模的IDC基础设施环境中，动不动就上百台服务器的量级，非常讲究批次的组件一致性，一旦选错了，轻则增加运营成本，重则因为功能或者扩展性的问题无法满足变化多端的业务需求。那如何从需求和成本之间找到平衡？这需要决策者能否充分调研分析，既要满足现状也要具有前瞻的眼光去考量这个选型。简单的说下几个组件的选型思路

## 准系统框架
- 体积
    - 1U : 1U 是一般中低端的服务器的标准身材，适合负载一些需要独占资源的单一应用。比如AD,NTP,Mgmt,跳板等用途。CPU一般可配备1~2个；
    - ![image](https://pek3a.qingstor.com/mynotes/R630.png)
    - 2U : 2U 很多中高端服务器的采用的体积规格，高度刚刚适合2.5寸硬盘竖插，很适合设计存储节点，另外目前很流行的高密度节点 2U2N(2U内2个计算节点)、2U4N(2U内4个计算节点)，高密度节点共享电源以及每节点分配本地存储空间，其它的都是独立的。适合偏计算，对本地存储无太大需求的用途，适合计较机柜空间、成本的管理者。CPU一般可配备1~4个；
    - ![image](https://pek3a.qingstor.com/mynotes/C6100.png)
    - 4U ：4U 高端服务器，厚实的巨无霸，扩展性方面完全可覆盖90%需求，无论是CPU/内存/硬盘的扩展都可以达到一般的应用系统的上限，CPU一般可配备1~8个，特点是贵，无论是CAPEX还是OPEX！
    - ![image](https://pek3a.qingstor.com/mynotes/X3850X6.png)
- CPU 插槽
    - 双路 现在服务器设计最低都是双路起，可以插一个CPU，另一个不插，但是根据目前流行 NUMA 架构，你可能会损失一半的内存插槽是无法被CPU识别的。
- 内存 插槽
    - 应不少于24插槽
- PCI 插槽
    - 不少于4 插槽 ，具体按实际需求来，万兆网卡 /PCI 阵列卡 /PCI 闪存卡/ 显卡
- 硬盘插槽
    - 一般不少于 24 个，最好建议一步到位，同时要注意选购的阵列卡是否支持这么多硬盘。
- 主板其它功能
    - 基于IPMI标准的带外管理，双电源+冗余，支持legacy BIOS、uEFI两种模式的固件

## 计算
- 处理器
    - 处理器版本（工艺制程）
    - 内核数量，虚拟化用途建议不少于12
    - LLC 三级缓存，虚拟化用途建议不低于30MB
- 内存
    - DDR4 
    - 频率
    - 时延
    - 单条容量

## 存储
- 阵列卡
    - 缓存
    - 支持组RAID方式 RAID 0/1/2/5/6/10
- 磁盘
    - 尺寸 2.5、3.5
    - 转速 5.4k/7.2k/10k/15k
    - 容量 
    - 接口 SAS、NL-SAS
- 固态硬盘
    - 颗粒 TLC/MLC/eMLC/SLC/Optane
    - OP 即预留空间 建议不低于20%
    - DWPD 不低于10
    - 容量
    - 接口 SAS、PCI-e
    - 协议 SCSI、NVMe

## 其它组件
- 主板
    - 具备耐高温长期稳定运行特点，主板耐腐蚀涂层
- 电源
    - 不少于2*电源模块，转换效率不低于90%
- 带外管理
    - 标准IPMI带外管理

## 管理
- 维护
    - 免工具维护，模块化设计